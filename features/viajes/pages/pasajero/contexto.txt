Resumen del Proyecto UniRide (Flujo Pasajero)

== Tech Stack y Arquitectura ==
- Tecnología: HTML, CSS, JavaScript "vanilla".
- Sin frameworks ni librerías complejas.
- No se usan módulos ES6 (import/export).
- Estructura modular por "features" (ej. /features/viajes, /features/rutas).
- El trabajo para el flujo de Pasajero se concentra en:
  - features/viajes/pages/pasajero/
  - features/viajes/js/pasajero/
  - features-viajes/css/pasajero/

== Estructura de Datos en LocalStorage ==

1.  `viajesGuardados`:
    - Origen: Creado por el Conductor.
    - Contenido: Array de objetos de viaje (ofertas de viaje).
    - Atributos por objeto: { fecha, hora, ruta, pasajeros, estado }.
    - NOTA: No contiene el nombre del conductor.

2.  `userRoutes`:
    - Origen: Creado en el módulo de Rutas por el conductor.
    - Contenido: Array de objetos de ruta.
    - Atributos por objeto: { name, direction, referencePlaces, description }.
    - `referencePlaces` es un string de paradas separadas por comas.

3.  `pasajero_viajes`:
    - Origen: Creado cuando un Pasajero reserva un viaje.
    - Contenido: Array de objetos de viaje que el pasajero ha reservado.
    - Atributos por objeto: { id, fecha, hora, ruta, punto_recogida, metodo_compensacion, estado }.

4.  `pasajero_solicitudes`:
    - Origen: Creado cuando un Pasajero envía una solicitud de reserva.
    - Contenido: Array de objetos de solicitud.
    - Atributos por objeto: { id_solicitud, id_viaje, pasajero, conductor, horario, estado, metodo_compensacion, monto_compensacion, punto_recogida, mensaje_opcional, creado_en }.

== Flujo de Pantallas y Lógica (Pasajero) ==

1.  `encontrar_viajes.html`:
    - Muestra las ofertas de viaje desde `viajesGuardados`.
    - El script `encontrar_viajes.js` renderiza la tabla dinámicamente.
    - El botón "Reservar" abre un modal (definido en `modals_pasajero.js`).
    - El modal de reserva crea una nueva entrada en `pasajero_solicitudes` y `pasajero_viajes`.

2.  `informacion_viaje.html`:
    - Muestra los detalles de una OFERTA de viaje (antes de reservar).
    - Se accede desde `encontrar_viajes.html` con un parámetro `?i=<index>`.
    - El script `informacion_viaje.js` obtiene los datos de `viajesGuardados` usando el índice.
    - Muestra las paradas de la ruta (`referencePlaces`) obtenidas desde `userRoutes`.
    - NO muestra "Lugar de Recojo Acordado" ni "Método de Compensación".
    - El botón "Reservar asiento" abre el modal de reserva.

3.  `viajes_usuario.html`:
    - Muestra la lista de viajes ya agendados por el pasajero, obtenidos de `pasajero_viajes`.
    - El script `viajes_usuario.js` renderiza la tabla.
    - El botón "Ver" en cada fila enlaza a `viaje_reservado_detalle.html`.

4.  `viaje_reservado_detalle.html`:
    - Muestra los detalles de un VIAJE YA RESERVADO.
    - Se accede desde `viajes_usuario.html` con un parámetro `?id=<id_viaje>`.
    - El script `viaje_reservado_detalle.js` obtiene los datos de `pasajero_viajes` usando el ID.
    - SÍ muestra "Lugar de Recojo Acordado" y "Método de Compensación".
    - El botón "Cancelar viaje" abre un modal para cancelar.

== Archivos JavaScript Clave (Pasajero) ==

- `viajesData.js`: Provee funciones para acceder a los datos de `localStorage` (`getConductorViajes`, `getPasajeroViajes`, `findStopsByRouteName`, etc.).
- `solicitudesData.js`: Maneja el CRUD para `pasajero_solicitudes`.
- `modals_pasajero.js`: Define y maneja la lógica de los modales de "Reservar" y "Cancelar".
- `encontrar_viajes.js`: Renderiza la lista de ofertas de viaje.
- `informacion_viaje.js`: Renderiza la página de detalle de una oferta de viaje.
- `viajes_usuario.js`: Renderiza la lista de viajes agendados y pasados del pasajero.
- `viaje_reservado_detalle.js`: Renderiza la página de detalle de un viaje ya reservado.

== Últimos Cambios Realizados ==
- Se corrigió un bug en `viajesData.js` que impedía mostrar las paradas de la ruta.
- Se separó la lógica de visualización de detalles en dos páginas distintas: `informacion_viaje.html` para ofertas y `viaje_reservado_detalle.html` para viajes reservados, cada una con su propio script.
- Se limpió la interfaz de `encontrar_viajes.html` eliminando botones sin funcionalidad.
- Se añadió un campo de "Monto de compensación" al modal de reserva y a la estructura de `pasajero_solicitudes`.
- Se corrigió un desalineamiento de columnas en la tabla de `encontrar_viajes.html`.
- Se ajustó la estructura y CSS de las páginas de detalles para mantener la consistencia visual.
